# Bot 语音沟通项目

## 项目环境

- **设备**: MacBook Pro
- **平台**: Intel x86_64
- **操作系统**: macOS 15.7.3
- **开发工具**: Homebrew, Python3.9 +

本项目用于实现与 OpenClaw AI 助手的语音沟通功能，让用户可以通过语音与 AI 进行自然对话。

## 项目目标

- 🎙️ 实现语音输入（Speech-to-Text）
- 🔊 实现语音输出（Text-to-Speech）
- 💬 实现自然语音对话
- 📱 支持多平台语音交互

## 功能规划

### 核心功能（H5 端）

| 功能 | 描述 | 优先级 |
|-----|------|--------|
| 用户登录 | Logo Store 存储 App Token | 高 |
| 语音输入按钮 | 点击按钮开始/结束录音 | 高 |
| 持续监听模式 | 开关控制持续语音识别 | 中 |
| 语音播放 | H5 页面播放 TTS 音频 | 高 |
| 对话展示 | 显示对话历史 | 高 |
| 打断功能 | 用户中断 AI 语音 | 中 |

### 扩展功能

- 方言识别（阿里云支持）
- 离线模式（需要额外开发）
- 语音情绪识别
- 个性化语音定制

## 技术方案

### 语音识别（STT）

- **✅ 选定方案**: **阿里云智能语音**
  - 实时语音识别：高精度、低延迟
  - 支持中文普通话、方言
  - 技术成熟，文档完善

### 语音合成（TTS）

- **✅ 选定方案**: **阿里云智能语音**
  - 多种音色选择
  - 自然流畅的语音合成
  - 高并发支持

### 对话引擎

- **OpenClaw** - 主要对话 AI
- **MiniMax** - 备用对话 AI

## 目录结构

```
bot语音沟通/
├── README.md                    # 本说明文件
├── code/                        # 代码目录
│   ├── frontend/                # 前端项目（Vue.js H5）
│   │   ├── src/
│   │   │   ├── components/      # 组件
│   │   │   │   ├── VoiceInput.vue   # 语音输入组件
│   │   │   │   ├── VoicePlayer.vue  # 语音播放组件
│   │   │   │   └── LoginModal.vue   # 登录弹窗
│   │   │   ├── views/           # 页面
│   │   │   ├── stores/          # Pinia 状态管理
│   │   │   ├── services/        # API 服务
│   │   │   └── utils/           # 工具函数
│   │   └── vite.config.js       # Vite 配置
│   └── backend/                 # 后端服务（待开发）
│       ├── src/
│       ├── config/
│       └── app.js
├── 设计文档/                    # 系统设计
│   ├── 架构设计.md              # 详细架构（已更新）
│   ├── 接口设计.md
│   └── 流程图/
└── 测试报告/                    # 测试结果
    └── 功能测试.md
```

## 技术栈

| 层级 | 技术 | 说明 |
|-----|------|------|
| 前端框架 | Vue.js 3 | H5 独立项目 |
| 构建工具 | Vite | 开发服务器 |
| 状态管理 | Pinia | 用户/语音状态 |
| 本地存储 | Logo Store | App Token 存储 |
| 语音识别 | 阿里云 ASR | 实时语音转文字 |
| 语音合成 | 阿里云 TTS | 文字转语音 |
| 对话引擎 | OpenClaw | AI 对话处理 |

## 用户认证

- **存储方式**: Logo Store
- **认证流程**: 用户需在 H5 页面登录 App Token 才能使用语音功能
- **验证方式**: 后端 API 验证 Token 有效性

## 开发计划

### Phase 1: H5 基础框架
- [ ] 初始化 Vue 3 + Vite 项目
- [ ] 配置路由和 Pinia 状态管理
- [ ] 实现用户认证（Logo Store）

### Phase 2: 语音功能开发
- [ ] 集成阿里云 ASR（语音识别）
- [ ] 集成阿里云 TTS（语音合成）
- [ ] 实现语音输入组件
- [ ] 实现语音播放组件
- [ ] 实现持续监听模式

### Phase 3: OpenClaw 集成
- [ ] 实现消息发送 API
- [ ] 实现回复接收（WebSocket）
- [ ] 完整流程联调测试

### Phase 4: 优化完善
- [ ] 添加 VAD 语音活动检测
- [ ] 优化用户体验
- [ ] 错误处理和重试机制

## 相关文档

- OpenClaw 官方文档
- **阿里云智能语音文档** - 已选定方案
- 百度语音服务文档
- Whisper 文档

## 进度追踪

- [x] 项目启动 - ✅ 已完成
- [x] 技术选型 - ✅ 已完成（阿里云智能语音服务）
- [x] H5 架构设计 - ✅ 已完成（Vue.js + 阿里云 ASR/TTS + 用户认证）
- [ ] 原型开发 - 待开始
- [ ] 功能测试 - 待开始
- [ ] 正式上线 - 待开始

## 创建时间

2026-01-30
